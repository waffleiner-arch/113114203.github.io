<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Omnigame â€” Intro</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="intro-page fullpage">
    <video id="introVideo" playsinline webkit-playsinline preload="auto" loop style="width:100%;height:100%;object-fit:cover;">
      <source src="assets/video_main.mp4" type="video/mp4">
    </video>
    <div class="overlay-start">
      <h1 class="logo">Omnigame Prototype</h1>

      <div style="margin:12px 0;display:flex;gap:8px;align-items:center">
        <label for="introVol" style="font-size:14px;color:#e6f7ff">Intro Volume</label>
        <input id="introVol" type="range" min="0" max="1" step="0.01" value="0.5" style="width:220px">
        <div id="introVolPct" style="width:48px;text-align:right;color:#cfeeff;font-size:13px">50%</div>
        <button id="introMuteBtn" style="margin-left:8px;padding:6px 8px;border-radius:6px;border:none;cursor:pointer">Mute</button>
      </div>

      <button id="startBtn" class="big-btn">Start</button>
      <div class="hint">Tekan Start untuk melanjutkan ke story</div>
    </div>
  </div>

<script>
  const introVideo = document.getElementById('introVideo');
  const introVol = document.getElementById('introVol');
  const introVolPct = document.getElementById('introVolPct');
  const introMuteBtn = document.getElementById('introMuteBtn');
  const savedIntroVol = parseFloat(localStorage.getItem('omnigame_intro_vol'));
  if(!isNaN(savedIntroVol)) {
    introVol.value = savedIntroVol;
    introVideo.volume = savedIntroVol;
    introVolPct.textContent = Math.round(savedIntroVol*100) + '%';
    introMuteBtn.textContent = savedIntroVol === 0 ? 'Unmute' : 'Mute';
  } else {
    introVideo.volume = parseFloat(introVol.value);
    introVolPct.textContent = Math.round(introVideo.volume*100) + '%';
  }
  introVol.addEventListener('input', (e) => {
    const v = parseFloat(e.target.value);
    introVideo.volume = v;
    introVolPct.textContent = Math.round(v*100) + '%';
    localStorage.setItem('omnigame_intro_vol', String(v));
    introMuteBtn.textContent = v === 0 ? 'Unmute' : 'Mute';
    if(v > 0 && introVideo.muted) introVideo.muted = false;
  });
  introMuteBtn.addEventListener('click', () => {
    if(introVideo.muted || introVideo.volume === 0) {
      const last = parseFloat(localStorage.getItem('omnigame_intro_vol')) || 0.5;
      introVideo.muted = false;
      introVideo.volume = last;
      introVol.value = last;
      introVolPct.textContent = Math.round(last*100) + '%';
      introMuteBtn.textContent = 'Mute';
      localStorage.setItem('omnigame_intro_vol', String(last));
    } else {
      introVideo.muted = true;
      introVideo.volume = 0;
      introVol.value = 0;
      introVolPct.textContent = '0%';
      introMuteBtn.textContent = 'Unmute';
      localStorage.setItem('omnigame_intro_vol', '0');
    }
  });

  document.getElementById('startBtn').addEventListener('click', () => {
    introVideo.play().catch(()=>{});
    window.location.href = 'lore.html';
  });
  introVideo.play().catch(()=>{});
</script>
</body>
</html>
